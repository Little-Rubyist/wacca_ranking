class User < ActiveRecord::Base
  extend Enumerize

  has_many :user_songs
  has_many :songs, through: :user_songs
  has_secure_password validations: true
  before_save { name.downcase! }

  VALID_NAME_REGEX = /\A[0-9a-zA-Z-_]*\z/
  validates :name, presence: true, uniqueness: true, format: { with: VALID_NAME_REGEX }

  enumerize :trophy, in: [
    101001,
    101002,
    101003,
    101004,
    101005,
    101006,
    101007,
    101008,
    101009,
    101010,
    101011,
    101012,
    101013,
    101014,
    101015,
    101016,
    101017,
    101018,
    101019,
    101020,
    101021,
    101022,
    101023,
    101024,
    101025,
    101026,
    101027,
    101028,
    101029,
    101030,
    101031,
    101036,
    101037,
    101038,
    201001,
    201002,
    201003,
    201004,
    201005,
    201006,
    201007,
    201008,
    201009,
    201010,
    201011,
    201012,
    201013,
    201014,
    201015,
    201016,
    201017,
    201018,
    201019,
    201020,
    201021,
    301001,
    301002,
    301003,
    301004,
    301005,
    301006,
    301007,
    301008,
    301009,
    301010,
    301011,
    301012,
    301013,
    301014,
    301015,
    301016,
    301017,
    301018,
    301019,
    301020], multiple: true
end
